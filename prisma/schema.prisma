generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("MONGODB_URI")
}

model ChatMessage {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  type      String   // "image" or "video"
  text      String
  sender    String   // "user" or "bot"
  mediaUrl  String?
  mediaType String?  // "image" or "video"
  mediaList Json?    // Store multiple media items (e.g. [{type: "image", src: "..."}])
  timestamp DateTime
  createdAt DateTime @default(now())

  // Fields for video generation tracking
  taskId     String?
  status     String?   // "pending", "success", "failed"
  failReason String?

  @@index([type, timestamp])
}
